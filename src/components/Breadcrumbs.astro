---
interface Props {
    stateName: string;
    stateSlug: string;
    cityName: string;
    citySlug: string;
    listicleName?: string; // Optional: for listicle pages like "Best Hotels"
    listicleSlug?: string; // Optional: slug for the listicle
}

const { stateName, stateSlug, cityName, citySlug, listicleName, listicleSlug } =
    Astro.props;

// Base URL for the site
const siteUrl = "https://www.whereinindia.online";

// Build the breadcrumb items for schema
const breadcrumbItems: any[] = [
    {
        "@type": "ListItem",
        position: 1,
        name: "Home",
        item: siteUrl,
    },
    {
        "@type": "ListItem",
        position: 2,
        name: stateName,
        item: `${siteUrl}/${stateSlug}`,
    },
    {
        "@type": "ListItem",
        position: 3,
        name: cityName,
        item: `${siteUrl}/${stateSlug}/${citySlug}`,
    },
];

// Add 4th level for listicle pages
if (listicleName && listicleSlug) {
    breadcrumbItems.push({
        "@type": "ListItem",
        position: 4,
        name: listicleName,
        item: `${siteUrl}/${stateSlug}/${citySlug}/${listicleSlug}`,
    });
}

const breadcrumbSchema = {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    itemListElement: breadcrumbItems,
};
---

<!-- BreadcrumbList Schema for SEO -->
<script
    type="application/ld+json"
    set:html={JSON.stringify(breadcrumbSchema)}
/>

<!-- Visual Breadcrumb Navigation -->
<nav class="breadcrumbs" aria-label="Breadcrumb">
    <ol>
        <li>
            <a href="/">Home</a>
            <span class="separator" aria-hidden="true">›</span>
        </li>
        <li>
            <a href={`/${stateSlug}`}>{stateName}</a>
            <span class="separator" aria-hidden="true">›</span>
        </li>
        {
            listicleName ? (
                <>
                    <li>
                        <a href={`/${stateSlug}/${citySlug}`}>{cityName}</a>
                        <span class="separator" aria-hidden="true">
                            ›
                        </span>
                    </li>
                    <li aria-current="page">
                        <span>{listicleName}</span>
                    </li>
                </>
            ) : (
                <li aria-current="page">
                    <span>{cityName}</span>
                </li>
            )
        }
    </ol>
</nav>

<style>
    .breadcrumbs {
        padding: 0.5rem 1rem;
        font-size: 0.75rem;
        color: #666;
        max-width: 1300px;
        margin: 0 auto;
    }

    .breadcrumbs ol {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 0.25rem;
    }

    .breadcrumbs li {
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }

    .breadcrumbs a {
        color: #555;
        text-decoration: none;
        transition: color 0.2s ease;
    }

    .breadcrumbs a:hover {
        color: #000;
        text-decoration: underline;
    }

    .breadcrumbs .separator {
        color: #aaa;
        font-size: 0.8rem;
    }

    .breadcrumbs li[aria-current="page"] span {
        color: #888;
    }

    /* Responsive - slightly larger on desktop */
    @media (min-width: 640px) {
        .breadcrumbs {
            padding: 0.75rem 1rem;
            font-size: 0.8rem;
        }
    }
</style>
