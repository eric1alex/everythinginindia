---
// 1. Update the Props interface to accept optional SEO metadata
interface Props {
	title: string;
	description?: string;
	ogImage?: string;
}

// 2. Set default values for the new props
const {
	title,
	description = "A community-curated travel directory for India. Stop getting lost on Google.",
	ogImage = "https://www.whereinindia.online/flag.png",
} = Astro.props;

// 3. Get the full page URL
const canonicalURL = Astro.url.href;

// REMOVED: ContributionModal import
import ShivratriPopup from "../components/ShivratriPopup.astro";
---

<!doctype html>
<html lang="en">
	<head>
		<!-- Google Tag Manager -->
		<script is:inline>
			(function (w, d, s, l, i) {
				w[l] = w[l] || [];
				w[l].push({
					"gtm.start": new Date().getTime(),
					event: "gtm.js",
				});
				var f = d.getElementsByTagName(s)[0],
					j = d.createElement(s),
					dl = l != "dataLayer" ? "&l=" + l : "";
				j.async = true;
				j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
				f.parentNode.insertBefore(j, f);
			})(window, document, "script", "dataLayer", "GTM-5FWZWB22");
		</script>
		<!-- End Google Tag Manager -->

		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<meta name="theme-color" content="#ffffff" />
		<meta name="robots" content="index, follow" />
		<link rel="icon" type="image/png" href="/flag.png" />
		<link rel="apple-touch-icon" href="/flag.png" />
		<meta name="generator" content={Astro.generator} />

		<!-- Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>

		<!-- Stylesheet -->
		<link rel="stylesheet" href="/styles/global.css" />

		<!-- SEO Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<link rel="canonical" href={canonicalURL} />
		<meta property="og:type" content="website" />
		<meta property="og:url" content={canonicalURL} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={ogImage} />
		<meta property="og:site_name" content="Where In India" />
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={canonicalURL} />
		<meta property="twitter:title" content={title} />
		<meta property="twitter:description" content={description} />
		<meta property="twitter:image" content={ogImage} />

		<!-- Google Schema: WebSite -->
		<script type="application/ld+json" is:inline>
			{
				"@context": "https://schema.org",
				"@type": "WebSite",
				"name": "Where In India",
				"alternateName": ["WhereInIndia", "Where In India Online"],
				"url": "https://www.whereinindia.online",
				"image": "https://www.whereinindia.online/flag.png",
				"potentialAction": {
					"@type": "SearchAction",
					"target": "https://www.whereinindia.online/?s={search_term_string}",
					"query-input": "required name=search_term_string"
				}
			}
		</script>

		<!-- Google Schema: Organization (for E-E-A-T) -->
		<script type="application/ld+json" is:inline>
			{
				"@context": "https://schema.org",
				"@type": "Organization",
				"name": "Where In India",
				"alternateName": "WhereInIndia",
				"url": "https://www.whereinindia.online",
				"logo": "https://www.whereinindia.online/flag.png",
				"description": "A community-curated travel directory for India, built for easy exploration and trip planning.",
				"foundingDate": "2025",
				"email": "hello@whereinindia.online",
				"sameAs": ["https://in.pinterest.com/TravelIndiaNow/"]
			}
		</script>
	</head>
	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript
			><iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-5FWZWB22"
				height="0"
				width="0"
				style="display:none;visibility:hidden"></iframe></noscript
		>

		<!-- Site Header -->
		<header class="site-header">
			<nav class="header-nav">
				<a href="/" class="header-logo">
					<img
						src="/flag.png"
						alt="Where In India Logo"
						class="header-logo-img"
					/>
					Where In India
				</a>
				<a href="/travel-essentials" class="header-submit">
					Travel Essentials
				</a>
			</nav>
		</header>

		<!-- Main Page Content -->
		<main>
			<slot />
		</main>

		<!-- Site Footer -->
		<footer class="site-footer">
			<div class="footer-grid">
				<div class="footer-column">
					<h4 class="footer-heading">
						<a href="/aboutus" class="footer-link">About Us</a>
					</h4>
					<p class="footer-text">
						A community-curated travel directory for India. Stop
						getting lost on Google.
					</p>
				</div>
				<div class="footer-column">
					<h4 class="footer-heading">Quick Links</h4>
					<ul class="footer-list">
						<li>
							<a href="/resources" class="footer-link"
								>Resources</a
							>
						</li>
						<li>
							<a href="/blog" class="footer-link"
								>Blog & Stories</a
							>
						</li>
						<li>
							<a
								href="https://forms.gle/JqRqaRjVqDba1Dso7"
								class="footer-link">Submit Your Place</a
							>
						</li>
						<li>
							<a href="/contributors" class="footer-link"
								>Contributors</a
							>
						</li>
					</ul>
				</div>
				<div class="footer-column">
					<h4 class="footer-heading">Contact</h4>
					<p class="footer-text">
						<a
							href="mailto:hello@whereinindia.online"
							class="footer-link">hello@whereinindia.online</a
						>
					</p>
				</div>
				<div class="footer-column">
					<h4 class="footer-heading">Travel essentials</h4>
					<p class="footer-text">
						Curated essentials for your next Indian adventure.
					</p>
					<a href="/travel-essentials" class="footer-donate-button"
						>View Travel essentials</a
					>
				</div>
			</div>
		</footer>

		<!-- City Page Fade-in Script -->
		<script is:raw src="/scripts/main.js"></script>
		<ShivratriPopup />
	</body>
</html>
