---
// 1. Update the Props interface to accept optional SEO metadata
interface Props {
	title: string;
	description?: string;
	ogImage?: string;
}

// 2. Set default values for the new props
const {
	title,
	description = "A curated travel directory for India. Stop getting lost on Google.",
	ogImage = "https://www.whereinindia.online/flag.png",
} = Astro.props;

// 3. Get the full page URL
const canonicalURL = Astro.url.href;

// REMOVED: ContributionModal import
---

<!doctype html>
<html lang="en">
	<head>
		<!-- Google Tag Manager -->
		<script is:inline>
			(function (w, d, s, l, i) {
				w[l] = w[l] || [];
				w[l].push({
					"gtm.start": new Date().getTime(),
					event: "gtm.js",
				});
				var f = d.getElementsByTagName(s)[0],
					j = d.createElement(s),
					dl = l != "dataLayer" ? "&l=" + l : "";
				j.async = true;
				j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
				f.parentNode.insertBefore(j, f);
			})(window, document, "script", "dataLayer", "GTM-5FWZWB22");
		</script>
		<!-- End Google Tag Manager -->

		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/png" href="/flag.png" />
		<link rel="apple-touch-icon" href="/flag.png" />
		<meta name="generator" content={Astro.generator} />

		<!-- Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>

		<!-- Stylesheet -->
		<link rel="stylesheet" href="/styles/global.css" />

		<!-- SEO Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<link rel="canonical" href={canonicalURL} />
		<meta property="og:type" content="website" />
		<meta property="og:url" content={canonicalURL} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={ogImage} />
		<meta property="og:site_name" content="Where In India" />
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={canonicalURL} />
		<meta property="twitter:title" content={title} />
		<meta property="twitter:description" content={description} />
		<meta property="twitter:image" content={ogImage} />

		<!-- Google Schema: WebSite -->
		<script type="application/ld+json" is:inline>
			{
				"@context": "https://schema.org",
				"@type": "WebSite",
				"name": "Where In India",
				"alternateName": ["WhereInIndia", "Where In India Online"],
				"url": "https://www.whereinindia.online",
				"image": "https://www.whereinindia.online/flag.png",
				"potentialAction": {
					"@type": "SearchAction",
					"target": "https://www.whereinindia.online/?s={search_term_string}",
					"query-input": "required name=search_term_string"
				}
			}
		</script>

		<!-- Google Schema: Organization (for E-E-A-T) -->
		<script type="application/ld+json" is:inline>
			{
				"@context": "https://schema.org",
				"@type": "Organization",
				"name": "Where In India",
				"alternateName": "WhereInIndia",
				"url": "https://www.whereinindia.online",
				"logo": "https://www.whereinindia.online/flag.png",
				"description": "A hand-curated travel directory for India, built for easy exploration and trip planning.",
				"foundingDate": "2025",
				"email": "hello@whereinindia.online",
				"sameAs": ["https://in.pinterest.com/TravelIndiaNow/"]
			}
		</script>
	</head>
	<body>
		<!-- Google Tag Manager (noscript) -->
		<noscript
			><iframe
				src="https://www.googletagmanager.com/ns.html?id=GTM-5FWZWB22"
				height="0"
				width="0"
				style="display:none;visibility:hidden"></iframe></noscript
		>

		<!-- Site Header -->
		<header class="site-header">
			<nav class="header-nav">
				<a href="/" class="header-logo">
					<img
						src="/flag.png"
						alt="Where In India Logo"
						class="header-logo-img"
					/>
					Where In India
				</a>
				<div class="discord-cta-wrapper">
					<a
						href="https://discord.gg/MU985BEQYx"
						class="header-submit"
						target="_blank"
						rel="noopener noreferrer"
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="18"
							height="18"
							viewBox="0 0 24 24"
							fill="currentColor"
							style="vertical-align: middle; margin-right: 6px;"
						>
							<path
								d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"
							></path>
						</svg>
						Join Community
					</a>
					<div class="discord-tooltip">
						Need help planning your next trip? Join our community to
						get real-time advice and itinerary reviews from verified
						locals.
					</div>
				</div>
			</nav>
		</header>

		<!-- Main Page Content -->
		<main>
			<slot />
		</main>

		<!-- Site Footer -->
		<footer class="site-footer">
			<div class="footer-grid">
				<div class="footer-column">
					<h4 class="footer-heading">
						<a href="/aboutus" class="footer-link">About Us</a>
					</h4>
					<p class="footer-text">
						A hand-curated travel directory for India. Stop getting
						lost on Google.
					</p>
				</div>
				<div class="footer-column">
					<h4 class="footer-heading">Quick Links</h4>
					<ul class="footer-list">
						<li>
							<a href="/resources" class="footer-link"
								>Resources</a
							>
						</li>
						<li>
							<a href="/blog" class="footer-link"
								>Blog & Stories</a
							>
						</li>
						<li>
							<a href="/contributors" class="footer-link"
								>Contributors</a
							>
						</li>
					</ul>
				</div>
				<div class="footer-column">
					<h4 class="footer-heading">Contact</h4>
					<p class="footer-text">
						<a
							href="mailto:hello@whereinindia.online"
							class="footer-link">hello@whereinindia.online</a
						>
					</p>
				</div>
				<div class="footer-column">
					<h4 class="footer-heading">Support Us</h4>
					<p class="footer-text">
						If you find this useful, consider supporting us!
					</p>
					<a href="/donate" class="footer-donate-button">Donate</a>
				</div>
			</div>
		</footer>

		<style is:global>
			/* Discord CTA Tooltip */
			.discord-cta-wrapper {
				position: relative;
				display: inline-block;
			}
			.discord-tooltip {
				position: absolute;
				top: calc(100% + 10px);
				right: 0;
				width: 280px;
				background: #fff;
				border: 1px solid #e5e5e5;
				border-radius: 8px;
				padding: 12px 14px;
				font-size: 13px;
				color: #444;
				line-height: 1.5;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
				opacity: 0;
				visibility: hidden;
				transform: translateY(-5px);
				transition:
					opacity 0.2s,
					visibility 0.2s,
					transform 0.2s;
				z-index: 1000;
				pointer-events: none;
			}
			.discord-tooltip::before {
				content: "";
				position: absolute;
				top: -6px;
				right: 20px;
				width: 10px;
				height: 10px;
				background: #fff;
				border-left: 1px solid #e5e5e5;
				border-top: 1px solid #e5e5e5;
				transform: rotate(45deg);
			}
			.discord-cta-wrapper:hover .discord-tooltip {
				opacity: 1;
				visibility: visible;
				transform: translateY(0);
				pointer-events: auto;
			}
			@media (max-width: 600px) {
				.discord-tooltip {
					display: none !important;
				}
			}
		</style>

		<!-- City Page Fade-in Script -->
		<script is:raw src="/scripts/main.js"></script>
	</body>
</html>
